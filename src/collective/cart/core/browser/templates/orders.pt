<html
  i18n:domain="collective.cart.core"
  lang="en"
  metal:use-macro="here/main_template/macros/master"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <body>
    <metal:title fill-slot="content-title">
      <h1 class="documentFirstHeading" i18n:translate="">Orders</h1>
    </metal:title>
    <metal:description fill-slot="content-description">
      <div
        class="documentDescription"
        i18n:translate="next-order-id"
        tal:define="container view/order_container">
        The next order ID: <span i18n:name="order_id" tal:replace="container/next_order_id" />
      </div>
    </metal:description>
    <metal:text fill-slot="content-core">
      <p
        i18n:translate="no-orders"
        id="no-orders"
        tal:condition="not: view/orders">
        There are no orders.
      </p>
      <table class="listing" tal:condition="view/orders">
        <thead>
          <tr>
            <th i18n:translate="">No.</th>
            <th i18n:translate="">Updated</th>
            <th i18n:translate="">Owner</th>
            <th i18n:translate="">State</th>
            <th i18n:translate="">Change State</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="item view/orders">
            <td>
              <a
                tal:attributes="href item/url"
                tal:content="item/id" />
            </td>
            <td tal:content="item/modified" />
            <td tal:content="item/owner" />
            <td i18n:translate="" tal:content="item/state_title" />
            <td>
              <form
                id="transition"
                method="post"
                tal:attributes="action context/@@plone_context_state/current_base_url">
                <input name="order_id" type="hidden" tal:attributes="value item/id" />
                <tal:block tal:repeat="transition item/transitions">
                  <button
                    i18n:domain="plone"
                    i18n:translate=""
                    name="form.buttons.ChangeState"
                    tal:attributes="value transition/id"
                    tal:content="transition/name"
                    tal:condition="transition/available"
                    type="submit"></button>
                </tal:block>
                <button
                  i18n:domain="plone"
                  i18n:translate=""
                  name="form.buttons.RemoveOrder"
                  value="form.buttons.RemoveOrder"
                  tal:condition="item/is_canceled"
                  type="submit">Remove</button>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </metal:text>
  </body>
</html>
